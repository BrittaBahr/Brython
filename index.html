<!documentTYPE html PUBLIC>
<html>
<head>
<title>python data viszualisation</title>
<meta charset="iso-8859-1">
<script src="brython.js"></script>
<script src="brython_stdlib.js"></script>
</head>
<body onLoad="brython(1)">
<script type="text/python">
import random
from browser import document
from browser import timer
from browser import bind, window
import time

datainput = []
timeValues = []
import csv
with open("datanf.csv") as csvdatei:
    csv_reader_object = csv.reader(csvdatei)
    for row in csv_reader_object:
        document["console"] <= '%s, ' % str(row)[0:5]
        datainput.append(float(row[1]))
        timevalue.append(float(row[0]))



canvas = document["plotarea"]
canvas_plot = canvas.getContext("2d")

def set_system(x, y):
    return (20 + x * 8, 420 - y * 20)

def draw_line(x1, y1, x2, y2, linethick = 3, color = "black"):
    canvas_plot.beginPath()
    canvas_plot.lineWidth = linethick
    canvas_plot.moveTo(x1, y1)
    canvas_plot.lineTo(x2, y2)
    canvas_plot.strokeStyle = color
    canvas_plot.stroke()
    canvas_plot.clearRect(410, 0, 400, 30)
    canvas_plot.fillStyle = "gray"
    canvas_plot.font = "bold 16px Arial"

def axis(color = "black", linethick = 3):
    draw_line(20, 420, 820, 420, linethick = linethick, color = color)
    draw_line(20, 20, 20, 420, linethick = linethick, color = color)

def set_axis_color(ev):
    axis(color = document["set_axis_color"].value)

dataset = []
def graph(input, num):
    data = input
    dataset.append(data)
    if len(dataset) == 1:
        x, y = set_system(timeValues[num], data)
        draw_line(x, y, x, y, linethick=3, color="blue")
    else:
        x1, y1 = set_system(timeValues[num-1], dataset[-2])
        x2, y2 = set_system(timeValues[num], data)
        draw_line(x1, y1, x2, y2, linethick=3, color="blue")

axis(color = "black", linethick = 5)
for i in range(0, len(datainput)-1):
    graph(datainput[i], i)
document['btn-axis'].bind('click', set_axis_color)
        </script>
<table>
    <tr>
        <td rowspan="3"><textarea id="console" cols=30 rows=30></textarea></td>
        <td><input id="set_axis_color" value="black"><button id="btn-axis">Change axis color</button></td>
    </tr>
    <tr>
        <td><canvas id="plotarea" width="840" height="440"></canvas></td>
    </tr>
</table>

    </body>
</html>
